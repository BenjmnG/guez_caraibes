$ty_len: 8;
$sf_len: 11;
$lo_len: 3;

body[data-serve="projets"]{

}
main[data-type="projets"]{

	$t: .25s;

	/* */
	/* Generals rules */

	border-bottom: 1px solid var(--cB);
	margin-bottom: $baseline;

	&, #map, .map_container, .map_container svg{
		width: 100%;
		height: calc(100vh - #{$tbHeight} - #{$baseline});
		height: calc(100dvh - #{$tbHeight} - #{$baseline});
	}

	#map{
		background: $c1a;
		position: absolute;
		top: 0;
		left: 0;
		box-sizing: border-box;
		z-index:  1;

		.map_container{
			overflow: hidden;
		}
	}

	> h1{
		@include f1(2);
		text-transform: uppercase;
		z-index: 6;
	}

	#filter{
		background: var(--cW);
		width: 100%;
		z-index: 5;

		label{
			cursor: pointer;
			width: 100%;
			display: block;
		}

		> ul{
			@include f1(1);
			text-transform: uppercase;

			> li > label{
				font-weight: $bold;
				cursor: pointer;
				display: flex;
				gap: $u*.5;
				.value{
					flex-shrink: 2;
					overflow: hidden;
					text-overflow: ellipsis;
					font-weight: normal;
					opacity: 1;
					transition: .25s ease-in-out;
					max-height: $baseline;
					white-space: nowrap;
					&:empty{
						//@include icon_valid;
						transition: 0s ease-in-out;
					}
				}		
			}

			ul > li{
				label{
					@include icon_valid;
				}
			}
		}
	}

	ul.list.projets{
		background: var(--cW);

		overflow: hidden auto;
		scrollbar-width: none;

		z-index: 2;
		box-sizing: border-box;

		::-webkit-scrollbar {
		  display: none;
		}

		li{

			.cover{
				background: $c3a;


				aspect-ratio: 3/2;
				width: 100%;
				max-height: max(10rem, 20vh);
				border-bottom: 1px solid currentColor;

				figure, picture, img{
					width: 100%;
					height: 100%;
				}

				picture{
					position: absolute;
					z-index: 2;
				}

				img{
					object-fit: cover;
				}

				.sample{
					z-index: 0;
					position: absolute;
					top: 0;
					left: 0;
				}
				svg{
					width: 25%;
					left: 50%;
					top: 50%;
					transform: translateX(-50%) translateY(-50%);
					color: var(--cB);
				}
			}

			&:nth-of-type(4n-1) .cover{
				background: $c2a;
			}
			&:nth-of-type(4n-2) .cover{
				background: $c4a;
			}

			ul.details{
				li{
					padding: $base*2;
					border-bottom: 1px solid currentColor;
					@include f1(1);
					padding-left: calc(max($u*7, 33.3%));
					&:before{
						position: absolute;
						content: attr(aria-label);
						top: 1em;
						left: 0;//$u*.5;
						@include f1(0);
					}

					&:empty{display: none;}
				}
			}
		}
	}

	
	input[name="open_filter"]:not(:checked) ~ #filter .value{

	}
	input[name="open_filter"]:checked ~,
	&.init{
		#filter .value:not(:empty){
			opacity: 0;
			transition: none;
		}

	} 

	/* */
	/* Responsive */ 

	@include for-size(phone){

		> h1{
			background: var(--cW);
			padding: $base*4 0;
		}

		#filter{
			position: absolute;
			bottom: -$baseline;
			padding: 0;
			transition: padding $t ease-in-out;
			border-top: 1px solid currentColor;

			>ul{
				> li{
					padding: $base 0;

					&:not(:last-child){
						border-bottom: 1px solid currentColor;
					}
				}
				ul{
	 				overflow: hidden;
	 				max-height: 0;
	 				padding: 0;
					transition: max-height $t ease-in-out,
											padding $t ease-in-out;

					li{
						padding-bottom: $base;
					}
				}
			}
		}

		input[name="open_filter"]:checked ~ #filter{
			padding: $base*2 0;
			> ul ul{
			}

		}
		
		input#filter_by_ty:checked ~ #filter > ul > li:nth-of-type(1),
		input#filter_by_sf:checked ~ #filter > ul > li:nth-of-type(2),
		input#filter_by_lo:checked ~ #filter > ul > li:nth-of-type(3){
			ul{
				padding: $base*2 0;
				max-height: 50vh;
			}
		}

		ul.list.projets{
			height: calc(100% - #{$base*12});
			padding-bottom: $baseline*10;
			box-sizing: border-box;

			.cover{
				margin-bottom: $base*4;
			}


			h1{
				@include f1(2, 0, $bold);
				margin-bottom: $base*2;
			}
		}
	}

	@include for-size(desktop){
		display: grid;
		grid-template-columns: repeat(6, 1fr);
		grid-template-rows: auto 1fr;
		grid-gap: 0 $u;
		justify-items: end;

		> h1{
			grid-column: 1 / 3;
			grid-row: 1;
			padding: $base 0 0 $u; 
			transition: padding $t ease-in-out;
			justify-self: start;
		}

		#filter{
			grid-column: 3 / span 4;
			grid-row: 1;
			width: 100%;
			height: auto;
			padding: 0;
			transition: padding $t ease-in-out,
									width $t ease-in-out;


			> ul{
				display: grid;
				grid-template-columns: repeat(6, 1fr);
				grid-gap: $baseline $u;
				align-items: start;
				padding: $base*2 $u;

				> li{
					grid-column: span 2;
				}
	
				ul{
	 				overflow: hidden;
	 				max-height: 0;
					transition: max-height $t ease-in-out,
											padding $t ease-in-out;
				}

			}
		}

		&.init{
			input[name="open_filter"]:checked ~ h1{
				padding-top: $base*4;
			}
		}

		input[name="open_filter"]:checked ~ #filter,
		&.init #filter{
			padding: $base*4 0;
			&:before{
				height: 100%;
			}
			> ul ul{
					max-height: $baseline*10;
					padding-top: $base*4;

			} 
		}

		ul.list.projets{
			grid-column: 3 / span 4;
			grid-row: 2;
			padding: $base*2 $u;

			display: grid;
			grid-template-columns: repeat(6, 1fr);
			grid-gap: $u;

			width: 100%;

			transition: transform .25s ease-in-out,
									width .25s ease-in-out;
			transform: translateX(100%);

			> li{
				grid-column: span 3;
			}

			.cover{
				margin-bottom: $baseline;
			}


			h1{
				@include f1(3, 0, $bold);
				margin-bottom: $base*4
			}

			header{
				margin-bottom: $base*4;
			}
		}

		input[id^="f-"]:checked ~ ul.list.projets{
			transform: translateX(0%) !important;
		}

	}

	@include for-size(desktop-1800){
		> h1{
			grid-column: 1 / 4;
		}
		#filter{
			grid-column: 4 / span 3;
		}

		ul.list.projets{
			grid-column: 4 / span 3;
		}

		input[id^="f-"]:checked ~ #map:hover{

			~ #filter,
			~ ul.list.projets{
				width: 75%;
				//transform: translateX( 40rem) !important;
			}
		}
	}

	@media (min-height: 800px){
		#filter:before{
			content: "";
			position: absolute;
			left: 0;
			top: 0;
			width: 0;
			height: 0;
			background: white;
			transition: width $t ease-in-out,
									left $t ease-in-out;
		}

		&.init #filter:before{
			left: calc(-100% - #{$u});
			width: calc(100vw - #{$u*3});
		}
		&.init input[id^="f-"]:checked ~ #filter:before{
			left: 0;
			width: 0;
		}
	}
}

